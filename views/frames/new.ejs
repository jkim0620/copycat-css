<!DOCTYPE html>
<html>
  <head>
    <%- include ../partials/head.ejs %>
  </head>
  <body>

    <h1>Editor</h1>
    <div>
      <pre id="html-editor">
      </pre>
    </div>

    <h1>iframe</h1>
    <iframe id="preview" class="desktop"></iframe>

    <!-- Link to Ace Editor -->
    <!-- <script src="../vendor/ace/ace.js" type="text/javascript" charset="utf-8"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.5/ace.js"></script>

    <script>
    $(document).ready(() => {
      console.log("Welcome to Julia's final project");

      let htmlEditor = ace.edit('html-editor');
      htmlEditor.setTheme('ace/theme/monokai');
      htmlEditor.getSession().setMode('ace/mode/html');


      htmlEditor.setValue('<h1>Hi!</hi>');
      // htmlEditor.clearSelection();

      let $preview = $('#preview');
      console.log($preview);
      console.log(htmlEditor.getValue());

      $preview.srcdoc = '<style></style><script><\/script>';
      $preview.contents().find('body').html(htmlEditor.getValue());
      // $("#desktop").contents().find("body").html(htmleditor.getValue());

      htmlEditor.on('change', () => {
        return $preview.contents().find('body').html(htmlEditor.getValue());
      })

    });

    </script>

  </body>
</html>
